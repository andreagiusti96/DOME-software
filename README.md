# DOME-software

This software allows the use of the [DOME (Dynamic Optical Micro-Environment)](http://theopendome.org) to study the movement of microorganisms and their resposen to light stimuli.

To start your first experiment with the DOME run `DOME_experiment.py` on the Raspberry Pi 4 connected to the camera.

## Features
  - Acquire images and video from the DOME camera (see `DOME_experiment.py`)
  - Project configurable and time varying light inputs and patterns (see `DOME_experiment.py`)
  - Automatic image analysis to detect and track moving agents (see `DOME_tracker.py`)
  - Analise trajectories of the tracked agents and extract relevant kinemitic features (see `DOME_experiment_analysis`)
  - Calibration to map the camera and the projector frames (see `DOME_calibration_camera_v2.py`)

<video src="https://github.com/user-attachments/assets/f410bdb5-bb8d-4e76-a73c-f1d2c03b91d1" controls></video>

## Main scripts
  - `DOME_experiment`: acquire video and images while controlling the projector. Use the console to input single commands or define an experiment as a sequence of actions. This is the main script to use the DOME.
  - `DOME_calibration`: automatic calibration of the camera-to-projector transformation.
  - `DOME_calibration_v2`: manual calibration of the camera-to-projector transformation.
  - `DOME_tracker`: reads the images acquired during an experiment to automatically detect and track the moving agents.
  - `DOME_experiment_analysis`: analyse the data generated by `DOME_tracker` and extract the relevant kinemitic features (e.g. speed, angular velocity).

## Utility scripts
  - `DOME_graphics`: utility for plots and images manipulation.
  - `DOME_imaging_utilities`: utility to use the camera.
  - `DOME_communication`: utility to manage the wifi communication between the two Raspberries Pi.
  - `DOME_experiment_manager`: utility to manage the storage of data generated during an experiment.
  - `DOME_transformation`: utility to manage the camera-to-projector transformation and the projection of shapes.
  - `DOME_projection_interface`: to run on the Raspberry Pi ZERO connected to the projector. Recives the commands from the Raspberry Pi connected to the camera and controls the projector.

## External resources
  - The DOME is an open-source platform for the control of microscale agents using light. For more info visit http://theopendome.org.
  - Example data captured with the DOME and analysed with this software is available at [Photomovement of Euglena and Volvox in the DOME](https://zenodo.org/records/13683456).
  - Got the kinematic data of your microorganisms? 
  Now you can generate their digital twins and simulate their movement with [SwarmSim](https://github.com/diBernardoGroup/SwarmSimPublic).
  - For additional info contact andrea.giusti.96@gmail.com.

## Copyrights
This software was developed starting from Matthew Uppington's work, at https://github.com/MattUppington/DOME-software.

If you use this code for research purposes and want to mention it in one of your publications, please cite [[Giusti2025]](https://www.biorxiv.org/content/10.1101/2025.02.21.639423v1) Giusti, A., Salzano, D., di Bernardo, M., & Gorochowski, T.E. (2025) 
Data-driven inference of digital twins for high-throughput phenotyping of motile and light-responsive microorganisms. 
BioRXiv preprint.
